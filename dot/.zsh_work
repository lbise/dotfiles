# Ugly hack to workaround this andromeda ctrl+c issue
check_tty_integrity() {
    if [[ "$(stty -a)" == *"-icrnl"* ]]; then
        print -P "%F{red}[WARNING]%f TTY flag '%F{yellow}$flag%f' is OFF (corrupted state detected)"
        stty icrnl
    fi
}

if [[ -n "$TMUX" ]]; then
precmd() {
    tmux refresh-client -S
    eval $(tmux showenv -s | grep -E '^(SSH|DISPLAY)')
    check_tty_integrity
}
fi

alias sourceme="cd $ANDROMEDA_ROOT && source sourceme"
